## üß† –ß—Ç–æ —Ç–∞–∫–æ–µ CI/CD?

**CI** (Continuous Integration) ‚Äî —ç—Ç–æ –ø—Ä–∞–∫—Ç–∏–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –∫–æ–¥–∞, –∫–æ–≥–¥–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Ä–µ–≥—É–ª—è—Ä–Ω–æ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∫–∞–∂–¥—ã–π –¥–µ–Ω—å) —Å–ª–∏–≤–∞—é—Ç —Å–≤–æ–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –æ—Å–Ω–æ–≤–Ω—É—é –≤–µ—Ç–∫—É.

**CD** (Continuous Delivery/Continuous Deployment) ‚Äî —ç—Ç–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –¥–æ—Å—Ç–∞–≤–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –Ω–∞ —Å—Ç–∞–¥–∏–∏ –ø—Ä–æ–¥–∞–∫—à–Ω –∏–ª–∏ staging —Å –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–º–∏ —É—Å–∏–ª–∏—è–º–∏, –∫–∞–∫ —Ç–æ–ª—å–∫–æ –∫–æ–¥ –ø—Ä–æ—Ö–æ–¥–∏—Ç —Ç–µ—Å—Ç—ã.

---

## üõ†Ô∏è –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã GitLab CI/CD

1. **Pipeline** ‚Äî —ç—Ç–æ –ø—Ä–æ—Ü–µ—Å—Å, —Å–æ—Å—Ç–æ—è—â–∏–π –∏–∑ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∑–∞–¥–∞—á, —Ç–∞–∫–∏—Ö –∫–∞–∫ —Å–±–æ—Ä–∫–∞, —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ.
2. **Jobs** ‚Äî —ç—Ç–æ –µ–¥–∏–Ω–∏—á–Ω—ã–µ —à–∞–≥–∏ –≤ –ø–∞–π–ø–ª–∞–π–Ω–µ, —Ç–∞–∫–∏–µ –∫–∞–∫ —Å–±–æ—Ä–∫–∞, —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ.
3. **Stages** ‚Äî —ç—Ç–æ –ª–æ–≥–∏—á–µ—Å–∫–∞—è –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ jobs –≤ –ø–∞–π–ø–ª–∞–π–Ω–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Å–±–æ—Ä–∫–∞, —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ, –¥–µ–ø–ª–æ–π).
4. **Runners** ‚Äî —ç—Ç–æ –∞–≥–µ–Ω—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ –≤—ã–ø–æ–ª–Ω—è—é—Ç jobs. –û–Ω–∏ –º–æ–≥—É—Ç –±—ã—Ç—å –ª–æ–∫–∞–ª—å–Ω—ã–º–∏ –∏–ª–∏ –æ–±–ª–∞—á–Ω—ã–º–∏.

---

## üß© –û—Å–Ω–æ–≤—ã `.gitlab-ci.yml`

–≠—Ç–æ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ñ–∞–π–ª –¥–ª—è GitLab CI/CD. –í –Ω–µ–º –æ–ø–∏—Å—ã–≤–∞—é—Ç—Å—è —ç—Ç–∞–ø—ã –ø–∞–π–ø–ª–∞–π–Ω–∞, jobs –∏ –∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏.

### –ü—Ä–∏–º–µ—Ä –±–∞–∑–æ–≤–æ–≥–æ `.gitlab-ci.yml`:
```yaml
stages:
  - build
  - test
  - deploy

# Job –¥–ª—è —Å–±–æ—Ä–∫–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
build:
  stage: build
  script:
    - echo "Building the app..."
    - make build

# Job –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
test:
  stage: test
  script:
    - echo "Running tests..."
    - make test

# Job –¥–ª—è –¥–µ–ø–ª–æ—è
deploy:
  stage: deploy
  script:
    - echo "Deploying the app..."
    - make deploy
  only:
    - master
```

- **stages** ‚Äî –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å —ç—Ç–∞–ø–æ–≤.
- **job** ‚Äî –¥–ª—è –∫–∞–∂–¥–æ–π –∑–∞–¥–∞—á–∏ —É–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –¥–µ–π—Å—Ç–≤–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, –≤ **script**).
- **only** ‚Äî —É–∫–∞–∑—ã–≤–∞–µ—Ç, –Ω–∞ –∫–∞–∫–∏—Ö –≤–µ—Ç–∫–∞—Ö/—Ç–µ–≥–∞—Ö –±—É–¥–µ—Ç –∑–∞–ø—É—Å–∫–∞—Ç—å—Å—è job.

---

## üöÄ –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç GitLab CI/CD

1. **Commit –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π** ‚Äî —ç—Ç–æ –∏–Ω–∏—Ü–∏–∏—Ä—É–µ—Ç –∑–∞–ø—É—Å–∫ –ø–∞–π–ø–ª–∞–π–Ω–∞ –≤ GitLab.
2. **Runner** –≤—ã–ø–æ–ª–Ω—è–µ—Ç job'—ã –≤ –ø–∞–π–ø–ª–∞–π–Ω–µ:
   - –°–∫–∞—á–∏–≤–∞–µ—Ç –∏—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥.
   - –í—ã–ø–æ–ª–Ω—è–µ—Ç –∫–æ–º–∞–Ω–¥—ã, —É–∫–∞–∑–∞–Ω–Ω—ã–µ –≤ `script` (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Å–±–æ—Ä–∫–∞, —Ç–µ—Å—Ç—ã).
3. **–ü–∞–π–ø–ª–∞–π–Ω –ø—Ä–æ—Ö–æ–¥–∏—Ç —á–µ—Ä–µ–∑ —Å—Ç–∞–¥–∏–∏**: –∫–∞–∂–¥–∞—è —Å—Ç–∞–¥–∏—è (build, test, deploy) –º–æ–∂–µ—Ç –≤–∫–ª—é—á–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ job'–æ–≤.
4. **–†–µ–∑—É–ª—å—Ç–∞—Ç**:
   - –ï—Å–ª–∏ –≤—Å–µ job'—ã –ø—Ä–æ—Ö–æ–¥—è—Ç, –ø–∞–π–ø–ª–∞–π–Ω —Å—á–∏—Ç–∞–µ—Ç—Å—è —É—Å–ø–µ—à–Ω—ã–º.
   - –ï—Å–ª–∏ —Ö–æ—Ç—è –±—ã –æ–¥–∏–Ω job –Ω–µ –ø—Ä–æ—à–µ–ª, –ø–∞–π–ø–ª–∞–π–Ω –±—É–¥–µ—Ç –ø–æ–º–µ—á–µ–Ω –∫–∞–∫ –Ω–µ—É–¥–∞—á–Ω—ã–π, –∏ –Ω—É–∂–Ω–æ –±—É–¥–µ—Ç –∏—Å–ø—Ä–∞–≤–∏—Ç—å –æ—à–∏–±–∫–∏.

---

## üß© –ü—Ä–∏–º–µ—Ä —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ job'–∞–º–∏ –∏ stages

```yaml
stages:
  - build
  - test
  - deploy

build:
  stage: build
  script:
    - echo "Building..."
    - docker build -t myapp .
  
test:
  stage: test
  script:
    - echo "Running tests..."
    - docker run myapp pytest

deploy:
  stage: deploy
  script:
    - echo "Deploying..."
    - kubectl apply -f k8s/deployment.yaml
  only:
    - master
```

### –í–∞–∂–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã:
- **Docker** –º–æ–∂–µ—Ç –±—ã—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω –¥–ª—è —Å–±–æ—Ä–∫–∏ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è.
- –ò—Å–ø–æ–ª—å–∑—É–µ–º **kubectl** –¥–ª—è –¥–µ–ø–ª–æ—è –≤ Kubernetes.

---

## üßë‚Äçüíª –í–∞–∂–Ω—ã–µ –¥–∏—Ä–µ–∫—Ç–∏–≤—ã –∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã

1. **before_script** ‚Äî –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –¥–æ –≤—Å–µ—Ö jobs –≤ –ø–∞–π–ø–ª–∞–π–Ω–µ:
   ```yaml
   before_script:
     - echo "Starting pipeline..."
   ```

2. **after_script** ‚Äî –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø–æ—Å–ª–µ –≤—Å–µ—Ö jobs:
   ```yaml
   after_script:
     - echo "Pipeline finished."
   ```

3. **cache** ‚Äî –¥–ª—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –º–µ–∂–¥—É –ø–∞–π–ø–ª–∞–π–Ω–∞–º–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏):
   ```yaml
   cache:
     paths:
       - node_modules/
   ```

4. **artifacts** ‚Äî —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç —Ñ–∞–π–ª—ã –ø–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è job –¥–ª—è –ø–æ—Å–ª–µ–¥—É—é—â–µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:
   ```yaml
   artifacts:
     paths:
       - build/
   ```

5. **dependencies** ‚Äî –¥–ª—è —É–∫–∞–∑–∞–Ω–∏—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –º–µ–∂–¥—É job'–∞–º–∏:
   ```yaml
   test:
     stage: test
     script:
       - run_tests
     dependencies:
       - build
   ```

---

## üí• –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –≤ —Ä–∞–∑–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–ü—Ä–∏–º–µ—Ä —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è –≤ **staging** –∏ **production**:

```yaml
stages:
  - build
  - test
  - staging
  - production

staging:
  stage: staging
  script:
    - echo "Deploying to staging"
    - kubectl apply -f staging-deployment.yaml
  only:
    - develop

production:
  stage: production
  script:
    - echo "Deploying to production"
    - kubectl apply -f production-deployment.yaml
  only:
    - master
```

- **develop** ‚Äî –≤–µ—Ç–∫–∞ –¥–ª—è staging.
- **master** ‚Äî –≤–µ—Ç–∫–∞ –¥–ª—è production.

---

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –≤ CI/CD

1. **–°–µ–∫—Ä–µ—Ç—ã**: –ò—Å–ø–æ–ª—å–∑—É–π **GitLab Secrets** –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö, —Ç–∞–∫–∏—Ö –∫–∞–∫ API –∫–ª—é—á–∏, –ø–∞—Ä–æ–ª–∏, —Ç–æ–∫–µ–Ω—ã.
   - –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –º–æ–≥—É—Ç –±—ã—Ç—å –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã —á–µ—Ä–µ–∑ **UI** –∏–ª–∏ –≤ —Ñ–∞–π–ª–µ `.gitlab-ci.yml`.

2. **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–æ–∫–µ–Ω–æ–≤**:
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `CI_JOB_TOKEN` –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –∏ –¥–æ—Å—Ç—É–ø–∞ –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ –∏–ª–∏ —Å–µ—Ä–≤–∏—Å—ã.

---

## üèÉ‚Äç‚ôÇÔ∏è GitLab Runners

GitLab CI/CD –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **GitLab Runners** –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è jobs. –ï—Å—Ç—å –¥–≤–∞ —Ç–∏–ø–∞ runners:
1. **Shared runners** ‚Äî –æ–±—â–∏–π runner, –¥–æ—Å—Ç—É–ø–Ω—ã–π –≤—Å–µ–º –ø—Ä–æ–µ–∫—Ç–∞–º –≤ GitLab.
2. **Specific runners** ‚Äî –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞.

### –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è GitLab Runner:
```bash
gitlab-ci-multi-runner register
```

1. –£–∫–∞–∑—ã–≤–∞–µ—à—å –∞–¥—Ä–µ—Å GitLab.
2. –£–∫–∞–∑—ã–≤–∞–µ—à—å —Ç–æ–∫–µ–Ω –¥–ª—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏.
3. –í—ã–±–∏—Ä–∞–µ—à—å executor (–Ω–∞–ø—Ä–∏–º–µ—Ä, shell, docker).

---

## üßë‚Äçüíª –°–æ–≤–µ—Ç—ã –¥–ª—è CI/CD –≤ GitLab

1. **–°–æ–±–ª—é–¥–∞–π –ø—Ä–∏–Ω—Ü–∏–ø—ã ‚ÄúInfrastructure as Code‚Äù** ‚Äî —Å–∫—Ä–∏–ø—Ç—ã –¥–ª—è —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –¥–æ–ª–∂–Ω—ã —Ö—Ä–∞–Ω–∏—Ç—å—Å—è –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏.
2. **–ù–µ –±–ª–æ–∫–∏—Ä—É–π –≤–µ—Ç–∫–∏** ‚Äî –Ω–µ –∑–∞–ø—Ä–µ—â–∞–π –¥–µ–ø–ª–æ–π –Ω–∞ –≤–µ—Ç–∫—É, –µ—Å–ª–∏ —ç—Ç–æ –Ω–µ –∫—Ä–∏—Ç–∏—á–Ω–æ.
3. **–ò—Å–ø–æ–ª—å–∑—É–π –≤–µ—Ä—Å–∏–∏** ‚Äî –¥–ª—è –≤—Å–µ—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –∏—Å–ø–æ–ª—å–∑—É–π –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –≤–µ—Ä—Å–∏–∏.
4. **–û—Ç–ª–æ–∂–µ–Ω–Ω—ã–π –¥–µ–ø–ª–æ–π** ‚Äî —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–π –Ω–∞ staging, –∞ –ø–æ—Ç–æ–º –Ω–∞ production.