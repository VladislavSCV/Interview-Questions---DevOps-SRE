## üì¶ –ß—Ç–æ —Ç–∞–∫–æ–µ ELK?

**ELK** ‚Äî —ç—Ç–æ —Å—Ç–µ–∫ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤:

- **Elasticsearch** ‚Äî –ø–æ–ª–Ω–æ—Ç–µ–∫—Å—Ç–æ–≤—ã–π –ø–æ–∏—Å–∫–æ–≤–∏–∫ –∏ –¥–≤–∏–∂–æ–∫ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏
- **Logstash** ‚Äî —Å–±–æ—Ä, –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∏ –ø–µ—Ä–µ–¥–∞—á–∞ –ª–æ–≥–æ–≤
- **Kibana** ‚Äî –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –∏–∑ Elasticsearch

–ò–Ω–æ–≥–¥–∞ –¥–æ–±–∞–≤–ª—è—é—Ç **Beats** (Filebeat, Metricbeat –∏ –¥—Ä.) ‚Äî –¥–ª—è –ª—ë–≥–∫–æ–π –æ—Ç–ø—Ä–∞–≤–∫–∏ –¥–∞–Ω–Ω—ã—Ö ‚Üí –Ω–∞–∑—ã–≤–∞—é—Ç **Elastic Stack**

---

## üîé **Elasticsearch**

### –ß—Ç–æ —ç—Ç–æ?
- –†–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã–π –ø–æ–∏—Å–∫–æ–≤—ã–π –¥–≤–∏–∂–æ–∫
- –û—Å–Ω–æ–≤–∞–Ω –Ω–∞ **Lucene**
- –†–∞–±–æ—Ç–∞–µ—Ç —Å **JSON-–¥–æ–∫—É–º–µ–Ω—Ç–∞–º–∏**
- –û—á–µ–Ω—å –±—ã—Å—Ç—Ä–æ –∏—â–µ—Ç –∏ –∞–≥–≥—Ä–µ–≥–∏—Ä—É–µ—Ç

### –ö–ª—é—á–µ–≤—ã–µ –ø–æ–Ω—è—Ç–∏—è:
- **Index** ‚Äî –∫–∞–∫ —Ç–∞–±–ª–∏—Ü–∞ –≤ –ë–î (–∫–æ–ª–ª–µ–∫—Ü–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤)
- **Document** ‚Äî JSON-–æ–±—ä–µ–∫—Ç
- **Shard** ‚Äî —á–∞—Å—Ç—å –∏–Ω–¥–µ–∫—Å–∞ (–¥–ª—è –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è)
- **Replica** ‚Äî –∫–æ–ø–∏—è —à–∞—Ä–¥–æ–≤

### –û—Å–Ω–æ–≤–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã:

```bash
GET /my-index/_search
POST /my-index/_doc
PUT /my-index
DELETE /my-index
```

### Mapping –∏ –∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä—ã:
- **Mapping** = —Å—Ö–µ–º–∞ –∏–Ω–¥–µ–∫—Å–∞
- **Analyzer** = –∫–∞–∫ —Ä–∞–∑–±–∏–≤–∞—Ç—å —Ç–µ–∫—Å—Ç (–ø–æ —Ç–æ–∫–µ–Ω–∞–º)

---

## üõ† **Logstash**

### –ß—Ç–æ —ç—Ç–æ?
- –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è **ETL** –ª–æ–≥–æ–≤ (Extract-Transform-Load)
- –ó–∞–±–∏—Ä–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ ‚Üí –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç ‚Üí –æ—Ç—Å—ã–ª–∞–µ—Ç –¥–∞–ª—å—à–µ (–æ–±—ã—á–Ω–æ –≤ Elasticsearch)

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:
```conf
input {
  file {
    path => "/var/log/nginx/access.log"
  }
}

filter {
  grok {
    match => { "message" => "%{COMMONAPACHELOG}" }
  }
  date {
    match => ["timestamp", "dd/MMM/yyyy:HH:mm:ss Z"]
  }
}

output {
  elasticsearch {
    hosts => ["http://localhost:9200"]
    index => "nginx-logs-%{+YYYY.MM.dd}"
  }
}
```

### –ü–ª–∞–≥–∏–Ω—ã:
- `input` (beats, file, syslog, jdbc, kafka‚Ä¶)
- `filter` (grok, mutate, date, geoip‚Ä¶)
- `output` (elasticsearch, file, stdout, kafka‚Ä¶)

---

## üìä **Kibana**

### –ß—Ç–æ —ç—Ç–æ?
- –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –ø–æ–∏—Å–∫–∞ –∏ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö –∏–∑ Elasticsearch
- –†–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ REST API

### –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:
- Dashboard
- Discover (–ø–æ–∏—Å–∫ –ª–æ–≥–æ–≤)
- Visualize (–≥—Ä–∞—Ñ–∏–∫–∏, –ø–∞–π—á–∞—Ä—Ç—ã, —Ç–∞–π–º–ª–∞–π–Ω—ã)
- Dev Tools (–∫–æ–Ω—Å–æ–ª—å –¥–ª—è –∑–∞–ø—Ä–æ—Å–æ–≤)
- Alerting (–æ–ø–æ–≤–µ—â–µ–Ω–∏—è)

---

## üì¨ **Beats (–¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ)**

- **Filebeat** ‚Äî –æ—Ç–ø—Ä–∞–≤–∫–∞ –ª–æ–≥–æ–≤
- **Metricbeat** ‚Äî –º–µ—Ç—Ä–∏–∫–∏ —Å–∏—Å—Ç–µ–º—ã
- **Packetbeat** ‚Äî —Å–µ—Ç–µ–≤–æ–π —Ç—Ä–∞—Ñ–∏–∫
- **Heartbeat** ‚Äî –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏
- –õ—ë–≥–∫–∏–µ, –Ω–∞–ø–∏—Å–∞–Ω—ã –Ω–∞ Go

–ü—Ä–∏–º–µ—Ä Filebeat:

```yaml
filebeat.inputs:
  - type: log
    paths:
      - /var/log/nginx/*.log

output.logstash:
  hosts: ["localhost:5044"]
```

---

## ‚öôÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Ç–∏–ø–æ–≤–∞—è

```
[Filebeat] --> [Logstash] --> [Elasticsearch] --> [Kibana]
```

–ú–æ–∂–Ω–æ **–±–µ–∑ Logstash** (Filebeat ‚Üí Elasticsearch) –¥–ª—è –ø—Ä–æ—Å—Ç—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤.

---

## üî• –ß–∞—Å—Ç—ã–µ –≤–æ–ø—Ä–æ—Å—ã –Ω–∞ —Å–æ–±–µ—Å–µ

- –ß–µ–º –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è Logstash –æ—Ç Beats?
- –ß—Ç–æ —Ç–∞–∫–æ–µ Shard –∏ Replica?
- –ö–∞–∫ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ—Ç—Å—è Elasticsearch?
- –ö–∞–∫ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å –ø–∞—Ä—Å–∏–Ω–≥ –ª–æ–≥–æ–≤ –≤ Logstash?
- –ö–∞–∫ –∏—Å–∫–∞—Ç—å –≤ Kibana?
- –ß—Ç–æ —Ç–∞–∫–æ–µ Ingest pipeline?
- –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç Full-Text Search?
- –ß—Ç–æ –¥–µ–ª–∞–µ—Ç grok?
- –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –∏–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ?
- –ö–∞–∫ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å alert'—ã?

---

## üí° –ü–æ–ª–µ–∑–Ω–æ–µ

- Kibana Dev Tools = Swagger –¥–ª—è Elasticsearch
- Grok Debugger: https://grokdebug.herokuapp.com/
- –ü–æ–∏—Å–∫: `field:value`, `field:[10 TO 100]`, `field.keyword: "exact match"`
- Aggregations: `terms`, `range`, `date_histogram`
- –í –ø—Ä–æ–¥–µ —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç Kafka ‚Üí Logstash –¥–ª—è –±—É—Ñ–µ—Ä–∏–∑–∞—Ü–∏–∏